<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø© | Maria Roboter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background:#f6f7f9; padding:20px; }
    .box { max-width:700px; margin:auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.08); }
    input, button { padding:12px; font-size:16px; }
    input { width:70%; }
    button { cursor:pointer; }
    .row { display:flex; gap:10px; flex-wrap:wrap; }
    .status { margin-top:20px; padding:12px; border-radius:8px; background:#f1f1f1; }
    .err { color:#b00020; }
  </style>
</head>
<body>

<div class="box">
  <h2>ğŸ” ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø©</h2>
  <p>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:</p>

  <div class="row">
    <input id="tid" placeholder="MR-2026-001">
    <button onclick="track()">ØªØªØ¨Ø¹</button>
  </div>

  <div id="msg"></div>
  <div id="result" class="status" style="display:none;"></div>
</div>

<script>
async function track(){
  const tid = document.getElementById('tid').value.trim();
  const msg = document.getElementById('msg');
  const resBox = document.getElementById('result');
  msg.textContent = '';
  resBox.style.display='none';

  if(!tid){
    msg.innerHTML = '<p class="err">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªØªØ¨Ø¹</p>';
    return;
  }

  try{
    const r = await fetch('/api/track/' + encodeURIComponent(tid));
    const data = await r.json();
    if(!r.ok) throw new Error(data.error || 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

    resBox.innerHTML = `
      <b>Ø±Ù‚Ù… Ø§Ù„ØªØªØ¨Ø¹:</b> ${data.trackingId}<br>
      <b>Ø§Ù„Ø­Ø§Ù„Ø©:</b> ${data.currentStatus}<br>
      <b>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</b> ${new Date(data.updatedAt).toLocaleString()}
    `;
    resBox.style.display='block';
  }catch(e){
    msg.innerHTML = '<p class="err">âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù†Ø©</p>';
  }
}
</script>

</body>
</html>
